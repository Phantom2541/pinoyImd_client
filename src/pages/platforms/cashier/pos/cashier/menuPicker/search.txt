import { MDBIcon } from "mdbreact";
import React from "react";

export default function Search({
  handleSearch,
  searchKey,
  setSearchKey,
  selected,
  didSearch,
  children,
  info = {},
  placeholder = "Fullname Search...",
  searchRef,
}) {
  const {
    message = "Last name, First name y Middle name",
    description = "Please maintain this order when searching.",
  } = info;
  const findMenu = () => handleSearch; // Placeholder function for search
  return (
    <div
      className={`cashier-search-cotaniner ${
        selected?._id && "pickedSearched"
      }`}
    >
      <div className={`cashier-instruction ${selected?._id && "hide"}`}>
        <MDBIcon
          icon="info-circle"
          size="lg"
          className="text-info cursor-pointer"
        />
        <div>
          <p>{message}</p>
          <i>{description}</i>
        </div>
      </div>
      <div
        className={`cashier-search ${didSearch && "active"} ${
          selected?._id && "pickedSearch"
        }`}
      >
        <div className="cashier-search-suggestions">
          <ul className="text-dark">{children}</ul>
        </div>
      <input
        ref={searchRef}
        placeholder={placeholder}
        value={searchKey}
          onChange={({ target }) => {
            console.log(target.value);
            
            setSearchKey(target.value)
          }}
        autoCorrect="off"
        spellCheck={false}
        className="form-control"
        onKeyDown={(e) => {
          if (e.key === "Enter") {
            console.log("enter");
            
            e.preventDefault(); // Prevent form submission behavior
              findMenu(); // Call the search function only if it's defined
            }
          }
        }
      />

        <button
          type="button"
          className={`${(didSearch || selected?._id) && "bg-danger"}`}
          onClick={findMenu()} // Trigger search manually
        >
          <MDBIcon
            icon={didSearch || selected?._id ? "times" : "search"}
            className="search-icon"
          />
        </button>
      </div>
    </div>
  );
}
